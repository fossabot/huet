"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(e){_defineProperty(t,e,r[e])})}return t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],0<=t.indexOf(r)||(n[r]=e[r]);return n}function _objectWithoutProperties(e,t){if(null==e)return{};var r,a,n=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var chroma=createCommonjsModule(function(e,t){e.exports=function(){for(var r=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e<t?t:r<e?r:e},t={},e=0,a=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];e<a.length;e+=1){var n=a[e];t["[object "+n+"]"]=n.toLowerCase()}var B=function(e){return t[Object.prototype.toString.call(e)]||"object"},o=Math.PI,i={clip_rgb:function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var t=0;t<=3;t++)t<3?((e[t]<0||255<e[t])&&(e._clipped=!0),e[t]=r(e[t],0,255)):3===t&&(e[t]=r(e[t],0,1));return e},limit:r,type:B,unpack:function(t,e){return void 0===e&&(e=null),3<=t.length?Array.prototype.slice.call(t):"object"==B(t[0])&&e?e.split("").filter(function(e){return void 0!==t[0][e]}).map(function(e){return t[0][e]}):t[0]},last:function(e){if(e.length<2)return null;var t=e.length-1;return"string"!=B(e[t])?null:e[t].toLowerCase()},PI:o,TWOPI:2*o,PITHIRD:o/3,DEG2RAD:o/180,RAD2DEG:180/o},c={format:{},autodetect:[]},u=i.last,f=i.clip_rgb,l=i.type,s=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("object"===l(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var r=u(e),a=!1;if(!r){a=!0,c.sorted||(c.autodetect=c.autodetect.sort(function(e,t){return t.p-e.p}),c.sorted=!0);for(var n=0,o=c.autodetect;n<o.length;n+=1){var i=o[n];if(r=i.test.apply(i,e))break}}if(!c.format[r])throw new Error("unknown format: "+e);var s=c.format[r].apply(null,a?e:e.slice(0,-1));this._rgb=f(s),3===this._rgb.length&&this._rgb.push(1)};s.prototype.toString=function(){return"function"==l(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var P=s,h=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h.Color,[null].concat(e)))};h.Color=P,h.version="2.0.2";var A=h,b=i.unpack,p=Math.max,g=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=b(e,"rgb"),a=r[0],n=r[1],o=r[2],i=1-p(a/=255,p(n/=255,o/=255)),s=i<1?1/(1-i):0,c=(1-a-i)*s,u=(1-n-i)*s,f=(1-o-i)*s;return[c,u,f,i]},d=i.unpack,y=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=d(e,"cmyk"))[0],a=e[1],n=e[2],o=e[3],i=4<e.length?e[4]:1;return 1===o?[0,0,0,i]:[1<=r?0:255*(1-r)*(1-o),1<=a?0:255*(1-a)*(1-o),1<=n?0:255*(1-n)*(1-o),i]},_=i.unpack,v=i.type;P.prototype.cmyk=function(){return g(this._rgb)},A.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["cmyk"])))},c.format.cmyk=y,c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=_(e,"cmyk"),"array"===v(e)&&4===e.length)return"cmyk"}});var m=i.unpack,T=i.last,w=function(e){return Math.round(100*e)/100},C=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=m(e,"hsla"),a=T(e)||"lsa";return r[0]=w(r[0]||0),r[1]=w(100*r[1])+"%",r[2]=w(100*r[2])+"%","hsla"===a||3<r.length&&r[3]<1?(r[3]=3<r.length?r[3]:1,a="hsla"):r.length=3,a+"("+r.join(",")+")"},k=i.unpack,j=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=k(e,"rgba"))[0],a=e[1],n=e[2];r/=255,a/=255,n/=255;var o,i,s=Math.min(r,a,n),c=Math.max(r,a,n),u=(c+s)/2;return c===s?(o=0,i=Number.NaN):o=u<.5?(c-s)/(c+s):(c-s)/(2-c-s),r==c?i=(a-n)/(c-s):a==c?i=2+(n-r)/(c-s):n==c&&(i=4+(r-a)/(c-s)),(i*=60)<0&&(i+=360),3<e.length&&void 0!==e[3]?[i,o,u,e[3]]:[i,o,u]},S=i.unpack,O=i.last,M=Math.round,$=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=S(e,"rgba"),a=O(e)||"rgb";return"hsl"==a.substr(0,3)?C(j(r),a):(r[0]=M(r[0]),r[1]=M(r[1]),r[2]=M(r[2]),("rgba"===a||3<r.length&&r[3]<1)&&(r[3]=3<r.length?r[3]:1,a="rgba"),a+"("+r.slice(0,"rgb"===a?3:4).join(",")+")")},E=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,R=/^#?([A-Fa-f0-9]{8})$/,I=function(e){if(e.match(E)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16),r=t>>16,a=t>>8&255,n=255&t;return[r,a,n,1]}if(e.match(R)){9===e.length&&(e=e.substr(1));var o=parseInt(e,16),i=o>>24&255,s=o>>16&255,c=o>>8&255,u=Math.round((255&o)/255*100)/100;return[i,s,c,u]}throw new Error("unknown hex color: "+e)},x=i.unpack,L=Math.round,N=function(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];var a,n,o,i=(t=x(t,"hsl"))[0],s=t[1],c=t[2];if(0===s)a=n=o=255*c;else{var u=[0,0,0],f=[0,0,0],l=c<.5?c*(1+s):c+s-c*s,h=2*c-l,b=i/360;u[0]=b+1/3,u[1]=b,u[2]=b-1/3;for(var p=0;p<3;p++)u[p]<0&&(u[p]+=1),1<u[p]&&(u[p]-=1),6*u[p]<1?f[p]=h+6*(l-h)*u[p]:2*u[p]<1?f[p]=l:3*u[p]<2?f[p]=h+(l-h)*(2/3-u[p])*6:f[p]=h;e=[L(255*f[0]),L(255*f[1]),L(255*f[2])],a=e[0],n=e[1],o=e[2]}return 3<t.length?[a,n,o,t[3]]:[a,n,o]},D={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},G=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,F=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,H=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,q=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,K=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,z=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,V=Math.round,U=function(e){if(e=e.toLowerCase().trim(),D[e])return I(D[e]);var t;if(t=e.match(G)){for(var r=t.slice(1,4),a=0;a<3;a++)r[a]=+r[a];return r[3]=1,r}if(t=e.match(F)){for(var n=t.slice(1,5),o=0;o<4;o++)n[o]=+n[o];return n}if(t=e.match(H)){for(var i=t.slice(1,4),s=0;s<3;s++)i[s]=V(2.55*i[s]);return i[3]=1,i}if(t=e.match(q)){for(var c=t.slice(1,5),u=0;u<3;u++)c[u]=V(2.55*c[u]);return c[3]=+c[3],c}if(t=e.match(K)){var f=t.slice(1,4);f[1]*=.01,f[2]*=.01;var l=N(f);return l[3]=1,l}if(t=e.match(z)){var h=t.slice(1,4);h[1]*=.01,h[2]*=.01;var b=N(h);return b[3]=+t[4],b}};U.test=function(e){return G.test(e)||F.test(e)||H.test(e)||q.test(e)||K.test(e)||z.test(e)};var W=U,Y=i.type;P.prototype.css=function(e){return $(this._rgb,e)},A.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["css"])))},c.format.css=W,c.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;0<r--;)t[r]=arguments[r+1];if(!t.length&&"string"===Y(e)&&W.test(e))return"css"}});var X=i.unpack;c.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=X(e,"rgba");return r[0]*=255,r[1]*=255,r[2]*=255,r},A.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["gl"])))},P.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var Z=i.unpack,J=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,a=Z(e,"rgb"),n=a[0],o=a[1],i=a[2],s=Math.min(n,o,i),c=Math.max(n,o,i),u=c-s,f=100*u/255,l=s/(255-u)*100;return 0===u?r=Number.NaN:(n===c&&(r=(o-i)/u),o===c&&(r=2+(i-n)/u),i===c&&(r=4+(n-o)/u),(r*=60)<0&&(r+=360)),[r,f,l]},Q=i.unpack,ee=Math.floor,te=function(){for(var e,t,r,a,n,o,i=[],s=arguments.length;s--;)i[s]=arguments[s];var c,u,f,l=(i=Q(i,"hcg"))[0],h=i[1],b=i[2];b*=255;var p=255*h;if(0===h)c=u=f=b;else{360===l&&(l=0),360<l&&(l-=360),l<0&&(l+=360);var g=ee(l/=60),d=l-g,y=b*(1-h),_=y+p*(1-d),v=y+p*d,m=y+p;switch(g){case 0:c=(e=[m,v,y])[0],u=e[1],f=e[2];break;case 1:c=(t=[_,m,y])[0],u=t[1],f=t[2];break;case 2:c=(r=[y,m,v])[0],u=r[1],f=r[2];break;case 3:c=(a=[y,_,m])[0],u=a[1],f=a[2];break;case 4:c=(n=[v,y,m])[0],u=n[1],f=n[2];break;case 5:c=(o=[m,y,_])[0],u=o[1],f=o[2]}}return[c,u,f,3<i.length?i[3]:1]},re=i.unpack,ae=i.type;P.prototype.hcg=function(){return J(this._rgb)},A.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["hcg"])))},c.format.hcg=te,c.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=re(e,"hcg"),"array"===ae(e)&&3===e.length)return"hcg"}});var ne=i.unpack,oe=i.last,ie=Math.round,se=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ne(e,"rgba"),a=r[0],n=r[1],o=r[2],i=r[3],s=oe(e)||"auto";void 0===i&&(i=1),"auto"===s&&(s=i<1?"rgba":"rgb"),a=ie(a),n=ie(n),o=ie(o);var c=a<<16|n<<8|o,u="000000"+c.toString(16);u=u.substr(u.length-6);var f="0"+ie(255*i).toString(16);switch(f=f.substr(f.length-2),s.toLowerCase()){case"rgba":return"#"+u+f;case"argb":return"#"+f+u;default:return"#"+u}},ce=i.type;P.prototype.hex=function(e){return se(this._rgb,e)},A.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["hex"])))},c.format.hex=I,c.autodetect.push({p:4,test:function(e){for(var t=[],r=arguments.length-1;0<r--;)t[r]=arguments[r+1];if(!t.length&&"string"===ce(e)&&[3,4,6,7,8,9].includes(e.length))return"hex"}});var ue=i.unpack,fe=i.TWOPI,le=Math.min,he=Math.sqrt,be=Math.acos,pe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,a=ue(e,"rgb"),n=a[0],o=a[1],i=a[2],s=le(n/=255,o/=255,i/=255),c=(n+o+i)/3,u=0<c?1-s/c:0;return 0===u?r=NaN:(r=(n-o+(n-i))/2,r/=he((n-o)*(n-o)+(n-i)*(o-i)),r=be(r),o<i&&(r=fe-r),r/=fe),[360*r,u,c]},ge=i.unpack,de=i.limit,ye=i.TWOPI,_e=i.PITHIRD,ve=Math.cos,me=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,a,n,o=(e=ge(e,"hsi"))[0],i=e[1],s=e[2];return isNaN(o)&&(o=0),isNaN(i)&&(i=0),360<o&&(o-=360),o<0&&(o+=360),(o/=360)<1/3?(n=(1-i)/3,r=(1+i*ve(ye*o)/ve(_e-ye*o))/3,a=1-(n+r)):o<2/3?(r=(1-i)/3,a=(1+i*ve(ye*(o-=1/3))/ve(_e-ye*o))/3,n=1-(r+a)):(a=(1-i)/3,n=(1+i*ve(ye*(o-=2/3))/ve(_e-ye*o))/3,r=1-(a+n)),r=de(s*r*3),a=de(s*a*3),n=de(s*n*3),[255*r,255*a,255*n,3<e.length?e[3]:1]},Te=i.unpack,we=i.type;P.prototype.hsi=function(){return pe(this._rgb)},A.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["hsi"])))},c.format.hsi=me,c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Te(e,"hsi"),"array"===we(e)&&3===e.length)return"hsi"}});var Ce=i.unpack,Ae=i.type;P.prototype.hsl=function(){return j(this._rgb)},A.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["hsl"])))},c.format.hsl=N,c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ce(e,"hsl"),"array"===Ae(e)&&3===e.length)return"hsl"}});var ke=i.unpack,Pe=Math.min,je=Math.max,Se=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,a,n,o=(e=ke(e,"rgb"))[0],i=e[1],s=e[2],c=Pe(o,i,s),u=je(o,i,s),f=u-c;return n=u/255,0===u?(r=Number.NaN,a=0):(a=f/u,o===u&&(r=(i-s)/f),i===u&&(r=2+(s-o)/f),s===u&&(r=4+(o-i)/f),(r*=60)<0&&(r+=360)),[r,a,n]},Oe=i.unpack,Me=Math.floor,$e=function(){for(var e,t,r,a,n,o,i=[],s=arguments.length;s--;)i[s]=arguments[s];var c,u,f,l=(i=Oe(i,"hsv"))[0],h=i[1],b=i[2];if(b*=255,0===h)c=u=f=b;else{360===l&&(l=0),360<l&&(l-=360),l<0&&(l+=360);var p=Me(l/=60),g=l-p,d=b*(1-h),y=b*(1-h*g),_=b*(1-h*(1-g));switch(p){case 0:c=(e=[b,_,d])[0],u=e[1],f=e[2];break;case 1:c=(t=[y,b,d])[0],u=t[1],f=t[2];break;case 2:c=(r=[d,b,_])[0],u=r[1],f=r[2];break;case 3:c=(a=[d,y,b])[0],u=a[1],f=a[2];break;case 4:c=(n=[_,d,b])[0],u=n[1],f=n[2];break;case 5:c=(o=[b,d,y])[0],u=o[1],f=o[2]}}return[c,u,f,3<i.length?i[3]:1]},Ee=i.unpack,Re=i.type;P.prototype.hsv=function(){return Se(this._rgb)},A.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["hsv"])))},c.format.hsv=$e,c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ee(e,"hsv"),"array"===Re(e)&&3===e.length)return"hsv"}});var Ie={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},xe=i.unpack,Le=Math.pow,Ne=function(e){return(e/=255)<=.04045?e/12.92:Le((e+.055)/1.055,2.4)},De=function(e){return Ie.t3<e?Le(e,1/3):e/Ie.t2+Ie.t0},Ge=function(e,t,r){e=Ne(e),t=Ne(t),r=Ne(r);var a=De((.4124564*e+.3575761*t+.1804375*r)/Ie.Xn),n=De((.2126729*e+.7151522*t+.072175*r)/Ie.Yn),o=De((.0193339*e+.119192*t+.9503041*r)/Ie.Zn);return[a,n,o]},Fe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=xe(e,"rgb"),a=r[0],n=r[1],o=r[2],i=Ge(a,n,o),s=i[0],c=i[1],u=i[2],f=116*c-16;return[f<0?0:f,500*(s-c),200*(c-u)]},He=i.unpack,Be=Math.pow,qe=function(e){return 255*(e<=.00304?12.92*e:1.055*Be(e,1/2.4)-.055)},Ke=function(e){return Ie.t1<e?e*e*e:Ie.t2*(e-Ie.t0)},ze=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,a,n,o,i,s,c=(e=He(e,"lab"))[0],u=e[1],f=e[2];return a=(c+16)/116,r=isNaN(u)?a:a+u/500,n=isNaN(f)?a:a-f/200,a=Ie.Yn*Ke(a),r=Ie.Xn*Ke(r),n=Ie.Zn*Ke(n),o=qe(3.2404542*r-1.5371385*a-.4985314*n),i=qe(-.969266*r+1.8760108*a+.041556*n),s=qe(.0556434*r-.2040259*a+1.0572252*n),[o,i,s,3<e.length?e[3]:1]},Ve=i.unpack,Ue=i.type;P.prototype.lab=function(){return Fe(this._rgb)},A.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["lab"])))},c.format.lab=ze,c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ve(e,"lab"),"array"===Ue(e)&&3===e.length)return"lab"}});var We=i.unpack,Ye=i.RAD2DEG,Xe=Math.sqrt,Ze=Math.atan2,Je=Math.round,Qe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=We(e,"lab"),a=r[0],n=r[1],o=r[2],i=Xe(n*n+o*o),s=(Ze(o,n)*Ye+360)%360;return 0===Je(1e4*i)&&(s=Number.NaN),[a,i,s]},et=i.unpack,tt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=et(e,"rgb"),a=r[0],n=r[1],o=r[2],i=Fe(a,n,o),s=i[0],c=i[1],u=i[2];return Qe(s,c,u)},rt=i.unpack,at=i.DEG2RAD,nt=Math.sin,ot=Math.cos,it=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=rt(e,"lch"),a=r[0],n=r[1],o=r[2];return isNaN(o)&&(o=0),[a,ot(o*=at)*n,nt(o)*n]},st=i.unpack,ct=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=st(e,"lch"))[0],a=e[1],n=e[2],o=it(r,a,n),i=o[0],s=o[1],c=o[2],u=ze(i,s,c),f=u[0],l=u[1],h=u[2];return[f,l,h,3<e.length?e[3]:1]},ut=i.unpack,ft=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ut(e,"hcl").reverse();return ct.apply(void 0,r)},lt=i.unpack,ht=i.type;P.prototype.lch=function(){return tt(this._rgb)},P.prototype.hcl=function(){return tt(this._rgb).reverse()},A.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["lch"])))},A.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["hcl"])))},c.format.lch=ct,c.format.hcl=ft,["lch","hcl"].forEach(function(r){return c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=lt(e,r),"array"===ht(e)&&3===e.length)return r}})});var bt=i.type;P.prototype.name=function(){for(var e=se(this._rgb,"rgb"),t=0,r=Object.keys(D);t<r.length;t+=1){var a=r[t];if(D[a]===e)return a.toLowerCase()}return e},c.format.named=function(e){if(e=e.toLowerCase(),D[e])return I(D[e]);throw new Error("unknown color name: "+e)},c.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;0<r--;)t[r]=arguments[r+1];if(!t.length&&"string"===bt(e)&&D[e.toLowerCase()])return"named"}});var pt=i.unpack,gt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=pt(e,"rgb"),a=r[0],n=r[1],o=r[2];return(a<<16)+(n<<8)+o},dt=i.type,yt=function(e){if("number"==dt(e)&&0<=e&&e<=16777215){var t=e>>16,r=e>>8&255,a=255&e;return[t,r,a,1]}throw new Error("unknown num color: "+e)},_t=i.type;P.prototype.num=function(){return gt(this._rgb)},A.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["num"])))},c.format.num=yt,c.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===_t(e[0])&&0<=e[0]&&e[0]<=16777215)return"num"}});var vt=i.unpack,mt=i.type,Tt=Math.round;P.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Tt)},P.prototype.rgba=function(r){return void 0===r&&(r=!0),this._rgb.slice(0,4).map(function(e,t){return t<3?!1===r?e:Tt(e):e})},A.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["rgb"])))},c.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=vt(e,"rgba");return void 0===r[3]&&(r[3]=1),r},c.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=vt(e,"rgba"),"array"===mt(e)&&(3===e.length||4===e.length&&"number"==mt(e[3])&&0<=e[3]&&e[3]<=1))return"rgb"}});var wt=Math.log,Ct=function(e){var t,r,a,n=e/100;return a=n<66?(t=255,r=-155.25485562709179-.44596950469579133*(r=n-2)+104.49216199393888*wt(r),n<20?0:.8274096064007395*(a=n-10)-254.76935184120902+115.67994401066147*wt(a)):(t=351.97690566805693+.114206453784165*(t=n-55)-40.25366309332127*wt(t),r=325.4494125711974+.07943456536662342*(r=n-50)-28.0852963507957*wt(r),255),[t,r,a,1]},At=i.unpack,kt=Math.round,Pt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var r,a=At(e,"rgb"),n=a[0],o=a[2],i=1e3,s=4e4;.4<s-i;){var c=Ct(r=.5*(s+i));c[2]/c[0]>=o/n?s=r:i=r}return kt(r)};P.prototype.temp=P.prototype.kelvin=P.prototype.temperature=function(){return Pt(this._rgb)},A.temp=A.kelvin=A.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["temp"])))},c.format.temp=c.format.kelvin=c.format.temperature=Ct;var jt=i.type;P.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===jt(e)?t?(this._rgb[3]=e,this):new P([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},P.prototype.clipped=function(){return this._rgb._clipped||!1},P.prototype.darken=function(e){void 0===e&&(e=1);var t=this.lab();return t[0]-=Ie.Kn*e,new P(t,"lab").alpha(this.alpha(),!0)},P.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},P.prototype.darker=P.prototype.darken,P.prototype.brighter=P.prototype.brighten,P.prototype.get=function(e){var t=e.split("."),r=t[0],a=t[1],n=this[r]();if(a){var o=r.indexOf(a);if(-1<o)return n[o];throw new Error("unknown channel "+a+" in mode "+r)}return n};var St=i.type,Ot=Math.pow;P.prototype.luminance=function(n){if(void 0===n||"number"!==St(n))return Mt.apply(void 0,this._rgb.slice(0,3));if(0===n)return new P([0,0,0,this._rgb[3]],"rgb");if(1===n)return new P([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),o=20,i=function(e,t){var r=e.interpolate(t,.5,"rgb"),a=r.luminance();return Math.abs(n-a)<1e-7||!o--?r:n<a?i(e,r):i(r,t)},t=(n<e?i(new P([0,0,0]),this):i(this,new P([255,255,255]))).rgb();return new P(t.concat([this._rgb[3]]))};var Mt=function(e,t,r){return e=$t(e),t=$t(t),r=$t(r),.2126*e+.7152*t+.0722*r},$t=function(e){return(e/=255)<=.03928?e/12.92:Ot((e+.055)/1.055,2.4)},Et={},Rt=i.type,It=function(e,t,r){void 0===r&&(r=.5);for(var a=[],n=arguments.length-3;0<n--;)a[n]=arguments[n+3];var o=a[0]||"lrgb";if(Et[o]||a.length||(o=Object.keys(Et)[0]),!Et[o])throw new Error("interpolation mode "+o+" is not defined");return"object"!==Rt(e)&&(e=new P(e)),"object"!==Rt(t)&&(t=new P(t)),Et[o](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))};P.prototype.mix=P.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var r=[],a=arguments.length-2;0<a--;)r[a]=arguments[a+2];return It.apply(void 0,[this,e,t].concat(r))},P.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new P([t[0]*r,t[1]*r,t[2]*r,r],"rgb")},P.prototype.saturate=function(e){void 0===e&&(e=1);var t=this.lch();return t[1]+=Ie.Kn*e,t[1]<0&&(t[1]=0),new P(t,"lch").alpha(this.alpha(),!0)},P.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var xt=i.type;P.prototype.set=function(e,t,r){void 0===r&&(r=!1);var a=e.split("."),n=a[0],o=a[1],i=this[n]();if(o){var s=n.indexOf(o);if(-1<s){if("string"==xt(t))switch(t.charAt(0)){case"+":case"-":i[s]+=+t;break;case"*":i[s]*=+t.substr(1);break;case"/":i[s]/=+t.substr(1);break;default:i[s]=+t}else{if("number"!==xt(t))throw new Error("unsupported value for Color.set");i[s]=t}var c=new P(i,n);return r?(this._rgb=c._rgb,this):c}throw new Error("unknown channel "+o+" in mode "+n)}return i},Et.rgb=function(e,t,r){var a=e._rgb,n=t._rgb;return new P(a[0]+r*(n[0]-a[0]),a[1]+r*(n[1]-a[1]),a[2]+r*(n[2]-a[2]),"rgb")};var Lt=Math.sqrt,Nt=Math.pow;Et.lrgb=function(e,t,r){var a=e._rgb,n=a[0],o=a[1],i=a[2],s=t._rgb,c=s[0],u=s[1],f=s[2];return new P(Lt(Nt(n,2)*(1-r)+Nt(c,2)*r),Lt(Nt(o,2)*(1-r)+Nt(u,2)*r),Lt(Nt(i,2)*(1-r)+Nt(f,2)*r),"rgb")},Et.lab=function(e,t,r){var a=e.lab(),n=t.lab();return new P(a[0]+r*(n[0]-a[0]),a[1]+r*(n[1]-a[1]),a[2]+r*(n[2]-a[2]),"lab")};var Dt=function(e,t,r,a){var n,o,i,s,c,u,f,l,h,b,p,g;return"hsl"===a?(i=e.hsl(),s=t.hsl()):"hsv"===a?(i=e.hsv(),s=t.hsv()):"hcg"===a?(i=e.hcg(),s=t.hcg()):"hsi"===a?(i=e.hsi(),s=t.hsi()):"lch"!==a&&"hcl"!==a||(a="hcl",i=e.hcl(),s=t.hcl()),"h"===a.substr(0,1)&&(c=(n=i)[0],f=n[1],h=n[2],u=(o=s)[0],l=o[1],b=o[2]),isNaN(c)||isNaN(u)?isNaN(c)?isNaN(u)?g=Number.NaN:(g=u,1!=h&&0!=h||"hsv"==a||(p=l)):(g=c,1!=b&&0!=b||"hsv"==a||(p=f)):g=c+r*(c<u&&180<u-c?u-(c+360):u<c&&180<c-u?u+360-c:u-c),void 0===p&&(p=f+r*(l-f)),new P([g,p,h+r*(b-h)],a)},Gt=function(e,t,r){return Dt(e,t,r,"lch")};Et.lch=Gt,Et.hcl=Gt,Et.num=function(e,t,r){var a=e.num(),n=t.num();return new P(a+r*(n-a),"num")},Et.hcg=function(e,t,r){return Dt(e,t,r,"hcg")},Et.hsi=function(e,t,r){return Dt(e,t,r,"hsi")},Et.hsl=function(e,t,r){return Dt(e,t,r,"hsl")},Et.hsv=function(e,t,r){return Dt(e,t,r,"hsv")};var Ft=i.clip_rgb,Ht=Math.pow,Bt=Math.sqrt,qt=Math.PI,Kt=Math.cos,zt=Math.sin,Vt=Math.atan2,Ut=function(e){for(var t=e.length,r=1/t,a=[0,0,0,0],n=0,o=e;n<o.length;n+=1){var i=o[n],s=i._rgb;a[0]+=Ht(s[0],2)*r,a[1]+=Ht(s[1],2)*r,a[2]+=Ht(s[2],2)*r,a[3]+=s[3]*r}return a[0]=Bt(a[0]),a[1]=Bt(a[1]),a[2]=Bt(a[2]),.9999999<a[3]&&(a[3]=1),new P(Ft(a))},Wt=i.type,Yt=Math.pow,Xt=function(u){var c="rgb",f=A("#ccc"),t=0,l=[0,1],h=[],b=[0,0],p=!1,g=[],r=!1,d=0,y=1,a=!1,_={},v=!0,m=1,n=function(e){if((e=e||["#fff","#000"])&&"string"===Wt(e)&&A.brewer&&A.brewer[e.toLowerCase()]&&(e=A.brewer[e.toLowerCase()]),"array"===Wt(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=A(e[t]);for(var r=h.length=0;r<e.length;r++)h.push(r/(e.length-1))}return o(),g=e},T=function(e){return e},w=function(e,t){var r,a;if(null==t&&(t=!1),isNaN(e)||null===e)return f;if(t)a=e;else if(p&&2<p.length){var n=function(e){if(null==p)return 0;for(var t=p.length-1,r=0;r<t&&e>=p[r];)r++;return r-1}(e);a=n/(p.length-2)}else a=y!==d?(e-d)/(y-d):1;t||(a=T(a)),1!==m&&(a=Yt(a,m)),a=b[0]+a*(1-b[0]-b[1]),a=Math.min(1,Math.max(0,a));var o=Math.floor(1e4*a);if(v&&_[o])r=_[o];else{if("array"===Wt(g))for(var i=0;i<h.length;i++){var s=h[i];if(a<=s){r=g[i];break}if(s<=a&&i===h.length-1){r=g[i];break}if(s<a&&a<h[i+1]){a=(a-s)/(h[i+1]-s),r=A.interpolate(g[i],g[i+1],a,c);break}}else"function"===Wt(g)&&(r=g(a));v&&(_[o]=r)}return r},o=function(){return _={}};n(u);var C=function(e){var t=A(w(e));return r&&t[r]?t[r]():t};return C.classes=function(e){if(null==e)return p;if("array"===Wt(e))l=[(p=e)[0],e[e.length-1]];else{var t=A.analyze(l);p=0===e?[t.min,t.max]:A.limits(t,"e",e)}return C},C.domain=function(e){if(!arguments.length)return l;d=e[0],y=e[e.length-1],h=[];var t=g.length;if(e.length===t&&d!==y)for(var r=0,a=Array.from(e);r<a.length;r+=1){var n=a[r];h.push((n-d)/(y-d))}else for(var o=0;o<t;o++)h.push(o/(t-1));return l=[d,y],C},C.mode=function(e){return arguments.length?(c=e,o(),C):c},C.range=function(e,t){return n(e),C},C.out=function(e){return r=e,C},C.spread=function(e){return arguments.length?(t=e,C):t},C.correctLightness=function(e){return null==e&&(e=!0),a=e,o(),T=a?function(e){for(var t=w(0,!0).lab()[0],r=w(1,!0).lab()[0],a=r<t,n=w(e,!0).lab()[0],o=t+(r-t)*e,i=n-o,s=0,c=1,u=20;.01<Math.abs(i)&&0<u--;)a&&(i*=-1),e+=i<0?.5*(c-(s=e)):.5*(s-(c=e)),n=w(e,!0).lab()[0],i=n-o;return e}:function(e){return e},C},C.padding=function(e){return null!=e?("number"===Wt(e)&&(e=[e,e]),b=e,C):b},C.colors=function(t,r){arguments.length<2&&(r="hex");var e=[];if(0===arguments.length)e=g.slice(0);else if(1===t)e=[C(.5)];else if(1<t){var a=l[0],n=l[1]-a;e=function(e,t,r){for(var a=[],n=e<t,o=r?n?t+1:t-1:t,i=e;n?i<o:o<i;n?i++:i--)a.push(i);return a}(0,t,!1).map(function(e){return C(a+e/(t-1)*n)})}else{u=[];var o=[];if(p&&2<p.length)for(var i=1,s=p.length,c=1<=s;c?i<s:s<i;c?i++:i--)o.push(.5*(p[i-1]+p[i]));else o=l;e=o.map(function(e){return C(e)})}return A[r]&&(e=e.map(function(e){return e[r]()})),e},C.cache=function(e){return null!=e?(v=e,C):v},C.gamma=function(e){return null!=e?(m=e,C):m},C.nodata=function(e){return null!=e?(f=A(e),C):f},C},Zt=function(e){var t,r,a,n,o,i,s;if(2===(e=e.map(function(e){return new P(e)})).length)t=e.map(function(e){return e.lab()}),o=t[0],i=t[1],n=function(t){var e=[0,1,2].map(function(e){return o[e]+t*(i[e]-o[e])});return new P(e,"lab")};else if(3===e.length)r=e.map(function(e){return e.lab()}),o=r[0],i=r[1],s=r[2],n=function(t){var e=[0,1,2].map(function(e){return(1-t)*(1-t)*o[e]+2*(1-t)*t*i[e]+t*t*s[e]});return new P(e,"lab")};else if(4===e.length){var c;a=e.map(function(e){return e.lab()}),o=a[0],i=a[1],s=a[2],c=a[3],n=function(t){var e=[0,1,2].map(function(e){return(1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*i[e]+3*(1-t)*t*t*s[e]+t*t*t*c[e]});return new P(e,"lab")}}else if(5===e.length){var u=Zt(e.slice(0,3)),f=Zt(e.slice(2,5));n=function(e){return e<.5?u(2*e):f(2*(e-.5))}}return n},Jt=function(e,t,r){if(!Jt[r])throw new Error("unknown blend mode "+r);return Jt[r](e,t)},Qt=function(n){return function(e,t){var r=A(t).rgb(),a=A(e).rgb();return A.rgb(n(r,a))}},er=function(a){return function(e,t){var r=[];return r[0]=a(e[0],t[0]),r[1]=a(e[1],t[1]),r[2]=a(e[2],t[2]),r}};Jt.normal=Qt(er(function(e){return e})),Jt.multiply=Qt(er(function(e,t){return e*t/255})),Jt.screen=Qt(er(function(e,t){return 255*(1-(1-e/255)*(1-t/255))})),Jt.overlay=Qt(er(function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))})),Jt.darken=Qt(er(function(e,t){return t<e?t:e})),Jt.lighten=Qt(er(function(e,t){return t<e?e:t})),Jt.dodge=Qt(er(function(e,t){return 255!==e?255<(e=t/255*255/(1-e/255))?255:e:255})),Jt.burn=Qt(er(function(e,t){return 255*(1-(1-t/255)/(e/255))}));for(var tr=Jt,rr=i.type,ar=i.clip_rgb,nr=i.TWOPI,or=Math.pow,ir=Math.sin,sr=Math.cos,cr=Math.floor,ur=Math.random,fr=Math.log,lr=Math.pow,hr=Math.floor,br=Math.abs,pr=function(e,t){void 0===t&&(t=null);var r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===B(e)&&(e=Object.values(e)),e.forEach(function(e){t&&"object"===B(e)&&(e=e[t]),null==e||isNaN(e)||(r.values.push(e),r.sum+=e,e<r.min&&(r.min=e),e>r.max&&(r.max=e),r.count+=1)}),r.domain=[r.min,r.max],r.limits=function(e,t){return gr(r,e,t)},r},gr=function(e,t,r){void 0===t&&(t="equal"),void 0===r&&(r=7),"array"==B(e)&&(e=pr(e));var a=e.min,n=e.max,o=e.values.sort(function(e,t){return e-t});if(1===r)return[a,n];var i=[];if("c"===t.substr(0,1)&&(i.push(a),i.push(n)),"e"===t.substr(0,1)){i.push(a);for(var s=1;s<r;s++)i.push(a+s/r*(n-a));i.push(n)}else if("l"===t.substr(0,1)){if(a<=0)throw new Error("Logarithmic scales are only possible for values > 0");var c=Math.LOG10E*fr(a),u=Math.LOG10E*fr(n);i.push(a);for(var f=1;f<r;f++)i.push(lr(10,c+f/r*(u-c)));i.push(n)}else if("q"===t.substr(0,1)){i.push(a);for(var l=1;l<r;l++){var h=(o.length-1)*l/r,b=hr(h);if(b===h)i.push(o[b]);else{var p=h-b;i.push(o[b]*(1-p)+o[b+1]*p)}}i.push(n)}else if("k"===t.substr(0,1)){var g,d=o.length,y=new Array(d),_=new Array(r),v=!0,m=0,T=null;(T=[]).push(a);for(var w=1;w<r;w++)T.push(a+w/r*(n-a));for(T.push(n);v;){for(var C=0;C<r;C++)_[C]=0;for(var A=0;A<d;A++)for(var k=o[A],P=Number.MAX_VALUE,j=void 0,S=0;S<r;S++){var O=br(T[S]-k);O<P&&(P=O,j=S),_[j]++,y[A]=j}for(var M=new Array(r),$=0;$<r;$++)M[$]=null;for(var E=0;E<d;E++)g=y[E],null===M[g]?M[g]=o[E]:M[g]+=o[E];for(var R=0;R<r;R++)M[R]*=1/_[R];v=!1;for(var I=0;I<r;I++)if(M[I]!==T[I]){v=!0;break}T=M,200<++m&&(v=!1)}for(var x={},L=0;L<r;L++)x[L]=[];for(var N=0;N<d;N++)g=y[N],x[g].push(o[N]);for(var D=[],G=0;G<r;G++)D.push(x[G][0]),D.push(x[G][x[G].length-1]);D=D.sort(function(e,t){return e-t}),i.push(D[0]);for(var F=1;F<D.length;F+=2){var H=D[F];isNaN(H)||-1!==i.indexOf(H)||i.push(H)}}return i},dr={analyze:pr,limits:gr},yr=Math.sqrt,_r=Math.atan2,vr=Math.abs,mr=Math.cos,Tr=Math.PI,wr={cool:function(){return Xt([A.hsl(180,1,.9),A.hsl(250,.7,.4)])},hot:function(){return Xt(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Cr={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Ar=0,kr=Object.keys(Cr);Ar<kr.length;Ar+=1){var Pr=kr[Ar];Cr[Pr.toLowerCase()]=Cr[Pr]}var jr=Cr;return A.average=function(e,n){void 0===n&&(n="lrgb");var t=e.length;if(e=e.map(function(e){return new P(e)}),"lrgb"===n)return Ut(e);for(var r=e.shift(),o=r.get(n),i=[],s=0,c=0,a=0;a<o.length;a++)if(o[a]=o[a]||0,i.push(isNaN(o[a])?0:1),"h"===n.charAt(a)&&!isNaN(o[a])){var u=o[a]/180*qt;s+=Kt(u),c+=zt(u)}var f=r.alpha();e.forEach(function(e){var t=e.get(n);f+=e.alpha();for(var r=0;r<o.length;r++)if(!isNaN(t[r]))if(i[r]++,"h"===n.charAt(r)){var a=t[r]/180*qt;s+=Kt(a),c+=zt(a)}else o[r]+=t[r]});for(var l=0;l<o.length;l++)if("h"===n.charAt(l)){for(var h=Vt(c/i[l],s/i[l])/qt*180;h<0;)h+=360;for(;360<=h;)h-=360;o[l]=h}else o[l]=o[l]/i[l];return f/=t,new P(o,n).alpha(.99999<f?1:f,!0)},A.bezier=function(e){var t=Zt(e);return t.scale=function(){return Xt(t)},t},A.blend=tr,A.cubehelix=function(f,l,h,b,p){void 0===f&&(f=300),void 0===l&&(l=-1.5),void 0===h&&(h=1),void 0===b&&(b=1),void 0===p&&(p=[0,1]);var g,d=0;"array"===rr(p)?g=p[1]-p[0]:(g=0,p=[p,p]);var t=function(e){var t=nr*((f+120)/360+l*e),r=or(p[0]+g*e,b),a=0!==d?h[0]+e*d:h,n=a*r*(1-r)/2,o=sr(t),i=ir(t),s=r+n*(-.14861*o+1.78277*i),c=r+n*(-.29227*o-.90649*i),u=r+n*(1.97294*o);return A(ar([255*s,255*c,255*u,1]))};return t.start=function(e){return null==e?f:(f=e,t)},t.rotations=function(e){return null==e?l:(l=e,t)},t.gamma=function(e){return null==e?b:(b=e,t)},t.hue=function(e){return null==e?h:("array"===rr(h=e)?0==(d=h[1]-h[0])&&(h=h[1]):d=0,t)},t.lightness=function(e){return null==e?p:(g="array"===rr(e)?(p=e)[1]-e[0]:(p=[e,e],0),t)},t.scale=function(){return A.scale(t)},t.hue(h),t},A.mix=A.interpolate=It,A.random=function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef".charAt(cr(16*ur()));return new P(e,"hex")},A.scale=Xt,A.analyze=dr.analyze,A.contrast=function(e,t){e=new P(e),t=new P(t);var r=e.luminance(),a=t.luminance();return a<r?(r+.05)/(a+.05):(a+.05)/(r+.05)},A.deltaE=function(e,t,r,a){void 0===r&&(r=1),void 0===a&&(a=1),e=new P(e),t=new P(t);for(var n=Array.from(e.lab()),o=n[0],i=n[1],s=n[2],c=Array.from(t.lab()),u=c[0],f=c[1],l=c[2],h=yr(i*i+s*s),b=yr(f*f+l*l),p=o<16?.511:.040975*o/(1+.01765*o),g=.0638*h/(1+.0131*h)+.638,d=h<1e-6?0:180*_r(s,i)/Tr;d<0;)d+=360;for(;360<=d;)d-=360;var y=164<=d&&d<=345?.56+vr(.2*mr(Tr*(d+168)/180)):.36+vr(.4*mr(Tr*(d+35)/180)),_=h*h*h*h,v=yr(_/(_+1900)),m=g*(v*y+1-v),T=h-b,w=i-f,C=s-l,A=(o-u)/(r*p),k=T/(a*g);return yr(A*A+k*k+(w*w+C*C-T*T)/(m*m))},A.distance=function(e,t,r){void 0===r&&(r="lab"),e=new P(e),t=new P(t);var a=e.get(r),n=t.get(r),o=0;for(var i in a){var s=(a[i]||0)-(n[i]||0);o+=s*s}return Math.sqrt(o)},A.limits=dr.limits,A.valid=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(P,[null].concat(e))),!0}catch(e){return!1}},A.scales=wr,A.colors=D,A.brewer=jr,A}()}),freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,Symbol$1=_root.Symbol,_Symbol=Symbol$1,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),r=e[symToStringTag];try{var a=!(e[symToStringTag]=void 0)}catch(e){}var n=nativeObjectToString.call(e);return a&&(t?e[symToStringTag]=r:delete e[symToStringTag]),n}var _getRawTag=getRawTag,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(e)?_getRawTag(e):_objectToString(e)}var _baseGetTag=baseGetTag;function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=function(){var e=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return null==e?void 0:e[t]}var _getValue=getValue;function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:void 0}var _getNative=getNative,defineProperty=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty$1=defineProperty;function baseAssignValue(e,t,r){"__proto__"==t&&_defineProperty$1?_defineProperty$1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _baseAssignValue=baseAssignValue;function createBaseFor(c){return function(e,t,r){for(var a=-1,n=Object(e),o=r(e),i=o.length;i--;){var s=o[c?i:++a];if(!1===t(n[s],s,n))break}return e}}var _createBaseFor=createBaseFor,baseFor=_createBaseFor(),_baseFor=baseFor;function baseTimes(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}var _baseTimes=baseTimes;function isObjectLike(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike,argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike_1(e)&&_baseGetTag(e)==argsTag}var _baseIsArguments=baseIsArguments,objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return isObjectLike_1(e)&&hasOwnProperty$2.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments,isArray=Array.isArray,isArray_1=isArray;function stubFalse(){return!1}var stubFalse_1=stubFalse,isBuffer_1=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,a=r&&e&&!e.nodeType&&e,n=a&&a.exports===r?_root.Buffer:void 0,o=(n?n.isBuffer:void 0)||stubFalse_1;e.exports=o}),MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&-1<e&&e%1==0&&e<t}var _isIndex=isIndex,MAX_SAFE_INTEGER$1=9007199254740991;function isLength(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=MAX_SAFE_INTEGER$1}var isLength_1=isLength,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike_1(e)&&isLength_1(e.length)&&!!typedArrayTags[_baseGetTag(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray;function baseUnary(t){return function(e){return t(e)}}var _baseUnary=baseUnary,_nodeUtil=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,a=r&&e&&!e.nodeType&&e,n=a&&a.exports===r&&_freeGlobal.process,o=function(){try{var e=a&&a.require&&a.require("util").types;return e||n&&n.binding&&n.binding("util")}catch(e){}}();e.exports=o}),nodeIsTypedArray=_nodeUtil&&_nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?_baseUnary(nodeIsTypedArray):_baseIsTypedArray,isTypedArray_1=isTypedArray,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys(e,t){var r=isArray_1(e),a=!r&&isArguments_1(e),n=!r&&!a&&isBuffer_1(e),o=!r&&!a&&!n&&isTypedArray_1(e),i=r||a||n||o,s=i?_baseTimes(e.length,String):[],c=s.length;for(var u in e)!t&&!hasOwnProperty$3.call(e,u)||i&&("length"==u||n&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_isIndex(u,c))||s.push(u);return s}var _arrayLikeKeys=arrayLikeKeys,objectProto$5=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$5)}var _isPrototype=isPrototype;function overArg(t,r){return function(e){return t(r(e))}}var _overArg=overArg,nativeKeys=_overArg(Object.keys,Object),_nativeKeys=nativeKeys,objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function baseKeys(e){if(!_isPrototype(e))return _nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$4.call(e,r)&&"constructor"!=r&&t.push(r);return t}var _baseKeys=baseKeys;function isArrayLike(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)}var isArrayLike_1=isArrayLike;function keys(e){return isArrayLike_1(e)?_arrayLikeKeys(e):_baseKeys(e)}var keys_1=keys;function baseForOwn(e,t){return e&&_baseFor(e,t,keys_1)}var _baseForOwn=baseForOwn;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq;function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq_1(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return-1<_assocIndexOf(this.__data__,e)}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var r=this.__data__,a=_assocIndexOf(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache;function stackClear(){this.__data__=new _ListCache,this.size=0}var _stackClear=stackClear;function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _stackDelete=stackDelete;function stackGet(e){return this.__data__.get(e)}var _stackGet=stackGet;function stackHas(e){return this.__data__.has(e)}var _stackHas=stackHas,Map$1=_getNative(_root,"Map"),_Map=Map$1,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$5.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$6.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var r=_getMapData(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,LARGE_ARRAY_SIZE=200;function stackSet(e,t){var r=this.__data__;if(r instanceof _ListCache){var a=r.__data__;if(!_Map||a.length<LARGE_ARRAY_SIZE-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new _MapCache(a)}return r.set(e,t),this.size=r.size,this}var _stackSet=stackSet;function Stack(e){var t=this.__data__=new _ListCache(e);this.size=t.size}Stack.prototype.clear=_stackClear,Stack.prototype.delete=_stackDelete,Stack.prototype.get=_stackGet,Stack.prototype.has=_stackHas,Stack.prototype.set=_stackSet;var _Stack=Stack,HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED$2),this}var _setCacheAdd=setCacheAdd;function setCacheHas(e){return this.__data__.has(e)}var _setCacheHas=setCacheHas;function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new _MapCache;++t<r;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=_setCacheAdd,SetCache.prototype.has=_setCacheHas;var _SetCache=SetCache;function arraySome(e,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}var _arraySome=arraySome;function cacheHas(e,t){return e.has(t)}var _cacheHas=cacheHas,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(e,t,r,a,n,o){var i=r&COMPARE_PARTIAL_FLAG,s=e.length,c=t.length;if(s!=c&&!(i&&s<c))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var f=-1,l=!0,h=r&COMPARE_UNORDERED_FLAG?new _SetCache:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var b=e[f],p=t[f];if(a)var g=i?a(p,b,f,t,e,o):a(b,p,f,e,t,o);if(void 0!==g){if(g)continue;l=!1;break}if(h){if(!_arraySome(t,function(e,t){if(!_cacheHas(h,t)&&(b===e||n(b,e,r,a,o)))return h.push(t)})){l=!1;break}}else if(b!==p&&!n(b,p,r,a,o)){l=!1;break}}return o.delete(e),o.delete(t),l}var _equalArrays=equalArrays,Uint8Array=_root.Uint8Array,_Uint8Array=Uint8Array;function mapToArray(e){var r=-1,a=Array(e.size);return e.forEach(function(e,t){a[++r]=[t,e]}),a}var _mapToArray=mapToArray;function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var _setToArray=setToArray,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$1="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",symbolProto=_Symbol?_Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,t,r,a,n,o,i){switch(r){case dataViewTag$1:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag$1:return!(e.byteLength!=t.byteLength||!o(new _Uint8Array(e),new _Uint8Array(t)));case boolTag$1:case dateTag$1:case numberTag$1:return eq_1(+e,+t);case errorTag$1:return e.name==t.name&&e.message==t.message;case regexpTag$1:case stringTag$1:return e==t+"";case mapTag$1:var s=_mapToArray;case setTag$1:var c=a&COMPARE_PARTIAL_FLAG$1;if(s||(s=_setToArray),e.size!=t.size&&!c)return!1;var u=i.get(e);if(u)return u==t;a|=COMPARE_UNORDERED_FLAG$1,i.set(e,t);var f=_equalArrays(s(e),s(t),a,n,o,i);return i.delete(e),f;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}var _equalByTag=equalByTag;function arrayPush(e,t){for(var r=-1,a=t.length,n=e.length;++r<a;)e[n+r]=t[r];return e}var _arrayPush=arrayPush;function baseGetAllKeys(e,t,r){var a=t(e);return isArray_1(e)?a:_arrayPush(a,r(e))}var _baseGetAllKeys=baseGetAllKeys;function arrayFilter(e,t){for(var r=-1,a=null==e?0:e.length,n=0,o=[];++r<a;){var i=e[r];t(i,r,e)&&(o[n++]=i)}return o}var _arrayFilter=arrayFilter;function stubArray(){return[]}var stubArray_1=stubArray,objectProto$9=Object.prototype,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(t){return null==t?[]:(t=Object(t),_arrayFilter(nativeGetSymbols(t),function(e){return propertyIsEnumerable$1.call(t,e)}))}:stubArray_1,_getSymbols=getSymbols;function getAllKeys(e){return _baseGetAllKeys(e,keys_1,_getSymbols)}var _getAllKeys=getAllKeys,COMPARE_PARTIAL_FLAG$2=1,objectProto$a=Object.prototype,hasOwnProperty$7=objectProto$a.hasOwnProperty;function equalObjects(e,t,r,a,n,o){var i=r&COMPARE_PARTIAL_FLAG$2,s=_getAllKeys(e),c=s.length;if(c!=_getAllKeys(t).length&&!i)return!1;for(var u=c;u--;){var f=s[u];if(!(i?f in t:hasOwnProperty$7.call(t,f)))return!1}var l=o.get(e);if(l&&o.get(t))return l==t;var h=!0;o.set(e,t),o.set(t,e);for(var b=i;++u<c;){var p=e[f=s[u]],g=t[f];if(a)var d=i?a(g,p,f,t,e,o):a(p,g,f,e,t,o);if(!(void 0===d?p===g||n(p,g,r,a,o):d)){h=!1;break}b||(b="constructor"==f)}if(h&&!b){var y=e.constructor,_=t.constructor;y!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(h=!1)}return o.delete(e),o.delete(t),h}var _equalObjects=equalObjects,DataView=_getNative(_root,"DataView"),_DataView=DataView,Promise$1=_getNative(_root,"Promise"),_Promise=Promise$1,Set=_getNative(_root,"Set"),_Set=Set,WeakMap=_getNative(_root,"WeakMap"),_WeakMap=WeakMap,mapTag$2="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$2="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=_toSource(_DataView),mapCtorString=_toSource(_Map),promiseCtorString=_toSource(_Promise),setCtorString=_toSource(_Set),weakMapCtorString=_toSource(_WeakMap),getTag=_baseGetTag;(_DataView&&getTag(new _DataView(new ArrayBuffer(1)))!=dataViewTag$2||_Map&&getTag(new _Map)!=mapTag$2||_Promise&&getTag(_Promise.resolve())!=promiseTag||_Set&&getTag(new _Set)!=setTag$2||_WeakMap&&getTag(new _WeakMap)!=weakMapTag$1)&&(getTag=function(e){var t=_baseGetTag(e),r=t==objectTag$1?e.constructor:void 0,a=r?_toSource(r):"";if(a)switch(a){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$2;case promiseCtorString:return promiseTag;case setCtorString:return setTag$2;case weakMapCtorString:return weakMapTag$1}return t});var _getTag=getTag,COMPARE_PARTIAL_FLAG$3=1,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$2="[object Object]",objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty;function baseIsEqualDeep(e,t,r,a,n,o){var i=isArray_1(e),s=isArray_1(t),c=i?arrayTag$1:_getTag(e),u=s?arrayTag$1:_getTag(t),f=(c=c==argsTag$2?objectTag$2:c)==objectTag$2,l=(u=u==argsTag$2?objectTag$2:u)==objectTag$2,h=c==u;if(h&&isBuffer_1(e)){if(!isBuffer_1(t))return!1;f=!(i=!0)}if(h&&!f)return o||(o=new _Stack),i||isTypedArray_1(e)?_equalArrays(e,t,r,a,n,o):_equalByTag(e,t,c,r,a,n,o);if(!(r&COMPARE_PARTIAL_FLAG$3)){var b=f&&hasOwnProperty$8.call(e,"__wrapped__"),p=l&&hasOwnProperty$8.call(t,"__wrapped__");if(b||p){var g=b?e.value():e,d=p?t.value():t;return o||(o=new _Stack),n(g,d,r,a,o)}}return!!h&&(o||(o=new _Stack),_equalObjects(e,t,r,a,n,o))}var _baseIsEqualDeep=baseIsEqualDeep;function baseIsEqual(e,t,r,a,n){return e===t||(null==e||null==t||!isObjectLike_1(e)&&!isObjectLike_1(t)?e!=e&&t!=t:_baseIsEqualDeep(e,t,r,a,baseIsEqual,n))}var _baseIsEqual=baseIsEqual,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(e,t,r,a){var n=r.length,o=n,i=!a;if(null==e)return!o;for(e=Object(e);n--;){var s=r[n];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++n<o;){var c=(s=r[n])[0],u=e[c],f=s[1];if(i&&s[2]){if(void 0===u&&!(c in e))return!1}else{var l=new _Stack;if(a)var h=a(u,f,c,e,t,l);if(!(void 0===h?_baseIsEqual(f,u,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,a,l):h))return!1}}return!0}var _baseIsMatch=baseIsMatch;function isStrictComparable(e){return e==e&&!isObject_1(e)}var _isStrictComparable=isStrictComparable;function getMatchData(e){for(var t=keys_1(e),r=t.length;r--;){var a=t[r],n=e[a];t[r]=[a,n,_isStrictComparable(n)]}return t}var _getMatchData=getMatchData;function matchesStrictComparable(t,r){return function(e){return null!=e&&(e[t]===r&&(void 0!==r||t in Object(e)))}}var _matchesStrictComparable=matchesStrictComparable;function baseMatches(t){var r=_getMatchData(t);return 1==r.length&&r[0][2]?_matchesStrictComparable(r[0][0],r[0][1]):function(e){return e===t||_baseIsMatch(e,t,r)}}var _baseMatches=baseMatches,symbolTag$1="[object Symbol]";function isSymbol(e){return"symbol"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag$1}var isSymbol_1=isSymbol,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray_1(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol_1(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var _isKey=isKey,FUNC_ERROR_TEXT="Expected a function";function memoize(n,o){if("function"!=typeof n||null!=o&&"function"!=typeof o)throw new TypeError(FUNC_ERROR_TEXT);var i=function(){var e=arguments,t=o?o.apply(this,e):e[0],r=i.cache;if(r.has(t))return r.get(t);var a=n.apply(this,e);return i.cache=r.set(t,a)||r,a};return i.cache=new(memoize.Cache||_MapCache),i}memoize.Cache=_MapCache;var memoize_1=memoize,MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}var _memoizeCapped=memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(rePropName,function(e,t,r,a){n.push(r?a.replace(reEscapeChar,"$1"):t||e)}),n}),_stringToPath=stringToPath;function arrayMap(e,t){for(var r=-1,a=null==e?0:e.length,n=Array(a);++r<a;)n[r]=t(e[r],r,e);return n}var _arrayMap=arrayMap,INFINITY=1/0,symbolProto$1=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}var _baseToString=baseToString;function toString(e){return null==e?"":_baseToString(e)}var toString_1=toString;function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1(e))}var _castPath=castPath,INFINITY$1=1/0;function toKey(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _toKey=toKey;function baseGet(e,t){for(var r=0,a=(t=_castPath(t,e)).length;null!=e&&r<a;)e=e[_toKey(t[r++])];return r&&r==a?e:void 0}var _baseGet=baseGet;function get(e,t,r){var a=null==e?void 0:_baseGet(e,t);return void 0===a?r:a}var get_1=get;function baseHasIn(e,t){return null!=e&&t in Object(e)}var _baseHasIn=baseHasIn;function hasPath(e,t,r){for(var a=-1,n=(t=_castPath(t,e)).length,o=!1;++a<n;){var i=_toKey(t[a]);if(!(o=null!=e&&r(e,i)))break;e=e[i]}return o||++a!=n?o:!!(n=null==e?0:e.length)&&isLength_1(n)&&_isIndex(i,n)&&(isArray_1(e)||isArguments_1(e))}var _hasPath=hasPath;function hasIn(e,t){return null!=e&&_hasPath(e,t,_baseHasIn)}var hasIn_1=hasIn,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(r,a){return _isKey(r)&&_isStrictComparable(a)?_matchesStrictComparable(_toKey(r),a):function(e){var t=get_1(e,r);return void 0===t&&t===a?hasIn_1(e,r):_baseIsEqual(a,t,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}var _baseMatchesProperty=baseMatchesProperty;function identity(e){return e}var identity_1=identity;function baseProperty(t){return function(e){return null==e?void 0:e[t]}}var _baseProperty=baseProperty;function basePropertyDeep(t){return function(e){return _baseGet(e,t)}}var _basePropertyDeep=basePropertyDeep;function property(e){return _isKey(e)?_baseProperty(_toKey(e)):_basePropertyDeep(e)}var property_1=property;function baseIteratee(e){return"function"==typeof e?e:null==e?identity_1:"object"==typeof e?isArray_1(e)?_baseMatchesProperty(e[0],e[1]):_baseMatches(e):property_1(e)}var _baseIteratee=baseIteratee;function mapValues(e,a){var n={};return a=_baseIteratee(a,3),_baseForOwn(e,function(e,t,r){_baseAssignValue(n,t,a(e,t,r))}),n}var mapValues_1=mapValues,BaseColor=function(){function t(e){if(_classCallCheck(this,t),!e)throw new Error("`hex` is required");this.hex=e}return _createClass(t,[{key:"alpha",value:function(e){return chroma(this.hex).alpha(e).hex()}},{key:"toString",value:function(){return this.hex}}]),t}(),Color=function(e){function S(e){var t,r=e.theme,a=e.bgColor,n=void 0===a?null:a,o=e.hex,i=e.ramp,s=void 0===i?null:i,c=e.baseRamp,u=void 0===c?null:c;if(_classCallCheck(this,S),t=_possibleConstructorReturn(this,_getPrototypeOf(S).call(this,o)),!r)throw new Error("`theme` is required");if(u&&(!1 in u||!1 in u))throw new Error("`baseRamp` can't be a direct ramp");if(!u&&(!n||n.baseRamp)&&!r.ramps.gray)throw new Error("No baseRamp");return t.theme=r,t.bgColor=n,t.ramp=s,t.baseRamp=u||n&&n.baseRamp||r.ramps.gray,t.lightness=getLightness(o),t}return _inherits(S,BaseColor),_createClass(S,[{key:"contrast",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.baseRamp;if("direct"===t.config.mode)return console.warn('You should be using the "direct" method instead since the "contrast" parameter won\'t do anything here'),this.direct(t);var r=this.theme,a=this.bgColor?this.bgColor.baseRamp:r.ramps.gray,n=_slicedToArray(this._getMinMax(t),2),o=n[0],i=n[1],s=_slicedToArray(this._getMinMax(this.ramp),2),c=s[0],u=s[1],f=(this.lightness-c)/(u-c),l=r.rescaleContrastToGrayRange||t!==a?Math.abs(.5-f)+.5:1,h=(i-o)/100,b=(o+i)/2,p=this.lightness<b?1:-1,g=t===a?1:this.lightness<b?r.maxColorLightness/100:1-r.minColorLightness/100,d=t===a||r.contrastMultiplier<1?r.contrastMultiplier:1,y=t((this.lightness+e*p*d*l*g*h-t.startL)/(t.endL-t.startL)).hex,_=_slicedToArray(chroma(this.hex).lab(),3),v=_[0],m=_[1],T=_[2],w=_slicedToArray(chroma(y).lab(),3),C=w[0],A=w[1],k=w[2],P=2*Math.abs(.5-f),j=r.contrastMultiplier<1?r.contrastMultiplier:(P+e)/100;return new S({theme:r,bgColor:this,hex:y=chroma.lab(v+1*(C-v),m+(A-m)*j,T+(k-T)*j).hex(),ramp:t})}},{key:"direct",value:function(e){if("direct"!==e.config.mode)throw new Error("Not allowed");var t=this.theme,r=this.baseRamp,a=e((this.lightness-r.startL)/(r.endL-r.startL)).hex;return new S({theme:t,bgColor:this,hex:a=chroma.mix(this.hex,a,Math.min(t.contrastMultiplier,1),"lab").hex(),ramp:e})}},{key:"base",value:function(e){return new S({theme:this.theme,bgColor:this.bgColor,hex:this.hex,ramp:this.ramp,baseRamp:e})}},{key:"alpha",value:function(e){return chroma(this.hex).alpha(e*this.theme.contrastMultiplier).hex()}},{key:"_getMinMax",value:function(e){var t=this.baseRamp;return e&&"direct"!==e.config.mode?e.config.isNeutral?[e.startL,e.endL]:[Math.max(e.startL,t.startL),Math.min(e.endL,t.endL)]:[t.startL,t.endL]}}],[{key:"fromTheme",value:function(e){var t=e.ramps[e.bgRamp];return new S({theme:e,bgColor:null,hex:t(e.bgRampValue).hex,ramp:t,baseRamp:t})}}]),S}();function getLightness(e){return Math.max(0,chroma(e).get("lab.l"))}var Theme=function e(t){_classCallCheck(this,e),this.pallet=t.pallet,this.bgRamp=t.bgRamp,this.bgRampValue=t.bgRampValue,this.minColorLightness=t.minColorLightness,this.maxColorLightness=t.maxColorLightness,this.contrastMultiplier=t.contrastMultiplier,this.saturationContrastMultiplier=t.saturationContrastMultiplier,this.rescaleContrastToGrayRange=t.rescaleContrastToGrayRange;var r=mapValues_1(t.ramps,function(e){return createRamp(t,e)});this.ramps=r};function createRamp(t,e){var r,a=_objectSpread({},defaultRampConfig,e),n=a.colors.map(function(e){return t.pallet[e]}),o=chroma.scale(n);switch(a.colorModel&&o.mode(a.colorModel),a.classes&&o.classes(a.classes),a.mode){case"direct":r=createDirectRampWithScale(o);break;case"colored":default:a.correctLightness&&o.correctLightness(),r=createRampWithScale(o)}return r.config=a,r}function wrapScaleFunc(t){return function(e){return new BaseColor(t(e).hex())}}function createRampWithScale(e){var t=wrapScaleFunc(e);return t.startL=getLightness(e(0)),t.endL=getLightness(e(1)),t}function createDirectRampWithScale(e){return wrapScaleFunc(e)}var defaultRampConfig={colors:["black","white"],colorModel:"lab",correctLightness:!0,mode:"colored"},ThemeContext=React__default.createContext(),BackgroundContext=React__default.createContext(),getPrototype=_overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype,objectTag$3="[object Object]",funcProto$2=Function.prototype,objectProto$c=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$9=objectProto$c.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(e){if(!isObjectLike_1(e)||_baseGetTag(e)!=objectTag$3)return!1;var t=_getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$9.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}var isPlainObject_1=isPlainObject;function Block(e){var t,r,a,n=e.as,o=void 0===n?"div":n,i=e.theme,s=(e.debug,e.style),c=e.colors,u=e.base,f=void 0===u?"gray":u,l=e.children,h=_objectWithoutProperties(e,["as","theme","debug","style","colors","base","children"]),b=React.useContext(ThemeContext),p=React.useContext(BackgroundContext);if(r=i?(t=i,Color.fromTheme(i)):(t=b,p),f&&(r=r.base(t.ramps[f])),!t)throw new Error("Need to set a theme before using a Block");a=isPlainObject_1(s)?s:isFunction_1(s)?s(r):null,c&&(a=_objectSpread({},a,parseColorsToStyle(r,c,f)));var g=_objectSpread({style:a},h),d=l;if(i&&(d=l?React__default.createElement(ThemeContext.Provider,{value:t},l):null),a&&a.backgroundColor){if(!a.backgroundColor instanceof Color)throw new Error("Use a Huet Color instance here.");d=l?React__default.createElement(BackgroundContext.Provider,{value:a.backgroundColor},d):null}else if(i){if(!l)throw new Error("Add children to the <Block> in order to see something on screen.");d=React__default.createElement(BackgroundContext.Provider,{value:r},d)}return React__default.createElement(o,g,d)}var keyToCss={bg:"backgroundColor",fg:"color",b:"borderColor",o:"outlineColor"};function parseColorsToStyle(e,t,g){var d=e.theme,r=t.split(" "),y={},_={parent:e};return r.forEach(function(e){var t,r=_slicedToArray(e.split(":"),2),a=r[0],n=r[1],o=_slicedToArray(function(){var e=_slicedToArray(n.split("-"),2),t=e[0],r=e[1];if(t&&r)return[parseInt(t,10),r];var a=parseInt(t,10);return Number.isInteger(a)?[a]:[,t]}(),2),i=o[0],s=o[1],c=void 0===s?g:s,u=a.split("/"),f=_slicedToArray(1<u.length?u:["parent",u[0]],2),l=f[0],h=f[1],b=_[l],p=d.ramps[c];t="direct"===p.config.mode?b.direct(p):b.contrast(i,p),_[h]=t,y[keyToCss[h]]=t}),y}var Contrast=function(e){var t=_objectSpread({as:"div",bg:null,border:null,outline:null},e),r=t.as,a=t.bg,n=t.bgRamp,o=t.text,i=t.textRamp,s=t.border,c=t.borderRamp,u=t.outline,f=t.outlineRamp,l=t.children,h=t.style,b=(t.debug,_objectWithoutProperties(t,["as","bg","bgRamp","text","textRamp","border","borderRamp","outline","outlineRamp","children","style","debug"])),p=React.useContext(ThemeContext);if(!p)throw new Error("Need to set a theme before using a Contrast component");var g=React.useContext(BackgroundContext)||Color.fromTheme(p);function d(e,t,r){var a=r?p.ramps[r]:p.ramps.gray;return"direct"===a.config.mode?e.direct(a):e.contrast(t,a)}var y=l,_=null,v=null;null!==a?(v=d(_=d(g,a,n),o,i),y=l?React__default.createElement(BackgroundContext.Provider,{value:_},l):null):v=d(g,o,i);var m=_objectSpread({style:_objectSpread({},{backgroundColor:_,color:v,borderColor:null!==s?d(g,s,c):null,outlineColor:null!==u?d(g,u,f):null},h)},b);return React__default.createElement(r,m,y)};exports.Theme=Theme,exports.Color=Color,exports.getLightness=getLightness,exports.ThemeContext=ThemeContext,exports.BackgroundContext=BackgroundContext,exports.Block=Block,exports.Contrast=Contrast;
